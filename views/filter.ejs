<% let labelAreaId = "labelArea"+title %>
<div class="d-flex justify-content-between align-items-center">
  <div class="dropdown">
    <button class="btn dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <%= title %>
    </button>
    <div class="dropdown-menu px-3" aria-labelledby="dropdownMenuButton">
      <% for (var i = 0; i < options.length; i++) { %>
        <% let checkBoxId = "checkBox"+title+options[i] %>
        <% let label = options[i] %>
        <div class="dropdown-item"  onclick="myFunction('<%= labelAreaId %>','<%= checkBoxId %>','<%= label %>')">
          <!-- The Checkbox is only for display usage. -->
          <input type="checkbox" class="form-check-input" id="<%= checkBoxId %>" onclick="this.checked=!this.checked;">
          <label class="form-check-label" for="<% checkBoxId %>">
            <%= label %>
          </label>
        </div>
      <% } %>
    </div>
  </div>
  <div id="<%= labelAreaId %>">
    <!-- sample label like below
      <span class="badge bg-secondary mx-1" id="labelId">Label 1<button type="button" class="btn-close" aria-label="Close" onClick="removeLabel(...)"></button></span>
    -->
  </div>
</div>

<script>
  function myFunction(labelAreaId, checkBoxId, label) {
    var checkBox = document.getElementById(checkBoxId);
    if (checkBox.checked == true){
      addLabel(labelAreaId, checkBoxId, label);
    } else {
      removeLabel(labelAreaId, checkBoxId, label);
    }
  }
  function addLabel(labelAreaId, checkBoxId, label){
    // create & add tag
    const labelArea = document.getElementById(labelAreaId);
    const tag = document.createElement("span");
    tag.id = labelAreaId+label;
    tag.classList.add("badge", "bg-secondary", "mx-1");
    tag.textContent = label;
    const closeButton = document.createElement("button");
    closeButton.classList.add("btn-close");
    closeButton.setAttribute("aria-label", "Close");
    closeButton.setAttribute("onClick", `removeLabel("${labelAreaId}", "${checkBoxId}", "${label}")`);
    tag.appendChild(closeButton);
    labelArea.appendChild(tag);

    // check
    var checkBox = document.getElementById(checkBoxId);
    checkBox.checked = true;
  }
  function removeLabel(labelAreaId, checkBoxId, label){
    // remove tag
    const labelId = labelAreaId+label;
    var label = document.getElementById(labelId);
    label.parentNode.removeChild(label);
    // uncheck
    var checkBox = document.getElementById(checkBoxId);
    checkBox.checked = false;
  }
</script>